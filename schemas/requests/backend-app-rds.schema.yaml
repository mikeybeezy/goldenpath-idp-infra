version: 1
id: backend-app-rds
title: Backend App + Managed RDS Request
description: Provision a Stateless Backend Application connected to a Managed RDS PostgreSQL Database.
type: object
additionalProperties: false

properties:
  # Application Details
  id:
    type: string
    description: Unique identifier for the request
    pattern: "^[a-z0-9]+(-[a-z0-9]+)*$"

  component_id:
    type: string
    description: App Name (e.g., my-service)
    pattern: "^[a-z0-9]+(-[a-z0-9]+)*$"

  owner:
    type: string
    description: Team or user owning this application
    enum_from: owners
    default: platform-team

  description:
    type: string
    description: Human-readable description

  replicas:
    type: integer
    description: Number of app replicas
    default: 1
    minimum: 1
    maximum: 10

  environment:
    type: string
    description: Target environment
    enum:
      - dev
      - test
      - staging
      - prod
    default: dev

  # Database Details
  databaseName:
    title: Database Name
    type: string
    description: Name for the Postgres database (e.g., myservice_db).
    pattern: '^[a-z][a-z0-9_]{2,62}$'

  username:
    title: Database Username
    type: string
    description: Username for database access (e.g., myservice_user).
    pattern: '^[a-z][a-z0-9_]{2,30}$'

required:
  - id
  - component_id
  - owner
  - description
  - databaseName
  - username
