version: 1
id: stateless-app
title: Stateless Application Request
description: Contract for provisioning a new Stateless Application (Deployment + Service + Ingress)
type: object
additionalProperties: false

properties:
  id:
    type: string
    description: Unique identifier for the request (e.g., app-001)
    pattern: "^[a-z0-9]+(-[a-z0-9]+)*$"
  
  owner:
    type: string
    description: Team or user owning this application
    enum_from: owners
    default: platform-team

  description:
    type: string
    description: Human-readable description of the application

  component_id:
    type: string
    description: The ID of the component in Backstage (e.g., my-service)
    pattern: "^[a-z0-9]+(-[a-z0-9]+)*$"

  image_repository:
    type: string
    description: ECR repository URL (optional, defaults to creating a new one)

  replicas:
    type: integer
    description: Number of replicas (default: 1)
    default: 1
    minimum: 1
    maximum: 10

  ingress_enabled:
    type: boolean
    description: Whether to create an Ingress resource (Kong)
    default: true

  environment:
    type: string
    description: Target environment for initial deployment
    enum:
      - dev
      - test
      - staging
      - prod
    default: dev

required:
  - id
  - owner
  - description
  - component_id
