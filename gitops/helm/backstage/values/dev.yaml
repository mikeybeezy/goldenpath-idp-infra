# Backstage Helm Values - Dev Environment
# Chart: backstage-helm/charts/backstage (local chart)
governance:
  id: HELM_BACKSTAGE_METADATA
  owner: null
  risk_profile: null
  reliability: null

# -----------------------------------------------------------------------------
# Image Configuration - ECR
# -----------------------------------------------------------------------------
image:
  repository: 593517239005.dkr.ecr.eu-west-2.amazonaws.com/
  name: backstage
  tag: 0.0.1
  pullPolicy: Always

# -----------------------------------------------------------------------------
# PostgreSQL (External RDS)
# Uses ExternalSecret to pull credentials from AWS Secrets Manager
# -----------------------------------------------------------------------------
postgres:
  host: goldenpath-dev-goldenpath-platform-db.cxmcacaams2q.eu-west-2.rds.amazonaws.com
  port: "5432"
  user: backstage_app
  password: "${POSTGRES_PASSWORD}"

# -----------------------------------------------------------------------------
# GitHub Integration
# -----------------------------------------------------------------------------
github:
  accessToken: "${GITHUB_TOKEN}"

# -----------------------------------------------------------------------------
# Catalog Configuration
# -----------------------------------------------------------------------------
catalog:
  catalogLocation: "https://raw.githubusercontent.com/mikeybeezy/goldenpath-idp-infra/governance-registry/backstage-catalog/all.yaml"
  customCatalogLocation: "None"

# -----------------------------------------------------------------------------
# Backstage Base URL
# -----------------------------------------------------------------------------
backstage:
  baseURL: "https://backstage.dev.goldenpath.io"

# -----------------------------------------------------------------------------
# Resource Limits for Dev
# -----------------------------------------------------------------------------
resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 1Gi

# -----------------------------------------------------------------------------
# Service Account
# -----------------------------------------------------------------------------
serviceAccount:
  create: true
  annotations:
    eks.amazonaws.com/role-arn: ""

clusterRoleBinding:
  create: true
